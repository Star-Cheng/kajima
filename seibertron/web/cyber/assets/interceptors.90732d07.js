import{b as i}from"./axios.095b39ac.js";import{l as E}from"./qs.d8de42ab.js";import{b as u,a as p,r as f}from"./index.ce62f2bc.js";import{p as A}from"./element-plus.e290ba2a.js";import{N as o}from"./nprogress.6825e71e.js";var B=(e,s)=>{const r=e.__vccOpts||e;for(const[a,l]of s)r[a]=l;return r},c=(e=>(e.ELEMENT_MESSAGE_BOX_SIZE="300px",e.ELEMENT_MESSAGE_BOX_CLASS="message-box-custom-class",e))(c||{});function n(e,s){A({message:s,type:e,duration:2e3,customClass:c.ELEMENT_MESSAGE_BOX_CLASS})}const m=i.create({timeout:1e3*10,responseType:"json"}),t={},d=i.CancelToken;function _(e){return JSON.stringify(e)}const S=(e,s)=>{const r=_(s);e==="check"?t[r]?t[r]():s.cancelToken=new d(a=>{t[r]=a}):e==="remove"&&delete t[r]},k=[];m.interceptors.request.use(e=>(e.hideProgress||o.start(),e.headers={"Access-Control-Max-Age":0},u()&&(e.headers.Authorization="Bearer "+u()),e.method==="get"&&(e.paramsSerializer=function(s){return E.stringify(s,{arrayFormat:"repeat"})}),k.includes(e.url)||S("check",e),e),e=>{Promise.reject(e).then(s=>{})});m.interceptors.response.use(e=>e.status!==200?(o.done(),Promise.resolve(e.statusText)):(o.done(),e.data),e=>{var s,r;if(o.done(),e.code==="ECONNABORTED"||e.message==="Network Error"||e.message.includes("timeout")){n("error","Network Error");return}return(((s=e.response)==null?void 0:s.status)===403||((r=e.response)==null?void 0:r.status)===401)&&(n("warning","\u30ED\u30B0\u30A4\u30F3\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u3001\u518D\u30ED\u30B0\u30A4\u30F3\u3057\u3066\u304F\u3060\u3055\u3044"),p(()=>{f.replace("/login")})),Promise.reject(e.response)});export{B as _,m as i,n as u};
